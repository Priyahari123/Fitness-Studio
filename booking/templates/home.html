{% load static %}
{% include 'menubar.html' %}
{% block content %}

<style>

  .whole {
    background-image: url("{% static 'images/gym_4.jpg' %}");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    height: 100vh; /* full screen height */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: white;
  }

  .hover-scale {
    transition: transform 0.3s ease;
  }
  .hover-scale:hover {
    transform: scale(1.05);
  }

  #cards_show {
    margin-top: 5rem;
  }
</style>


<style>
  .hover-scale {
    transition: transform 0.3s ease;
  }
  .hover-scale:hover {
    transform: scale(1.05);
  }
  #cards_show{
    margin-top:3%;
  }
</style>

<div class="whole">
<section class="text-white " >
    <br><br>
  <div class="container text-center ">
    <h1 class="display-5 fw-bold mb-4">Welcome to Elevate Fitness Studio</h1>
    <p class="lead">
      At Elevate Fitness Studio, we believe that fitness is more than just a routine — it's a lifestyle.
      Whether you're just getting started or looking to push your limits, our certified trainers and
      personalized programs are here to guide you every step of the way.
    </p>
    <p class="mt-4">
      Choose from a variety of group classes including <strong>Yoga, Zumba, HIIT, Strength Training, and more</strong>.
      Start your journey with us and unlock a healthier, stronger, and more confident you.
    </p>
    <a href="/programs/" class="btn btn-primary btn-lg mt-4">Explore Our Programs</a>
  </div>
</section>

</div>
<div class="container-fluid py-5" id="cards_show">
  <h2 class="text-center mb-5 fw-bold fs-2">Upcoming Fitness Classes</h2>
  <div class="row justify-content-center g-4">

    {% for c in classes %}
    <div class="col-md-3">
      <div class="card bg-light bg-opacity-75 border-0 shadow-lg rounded-4 text-center hover-scale">
        
        <!-- Instructor Image -->
        <div class="mt-4">
          <img src="/media/{{ c.instructor_image }}/" class="rounded-circle shadow-lg border border-3 border-white" width="170" height="170" alt="Fitness Trainer">
        </div>

        <!-- Card Content -->
        <div class="card-body">
          <h4 class="card-title fw-bold fs-4" style="font-family: 'Segoe UI', sans-serif;">{{ c.name }}</h4>
          
          <p class="mb-1 fw-semibold fs-6 text-dark" style="font-family: 'Segoe UI', sans-serif;">
            {{ c.instructor }}
          </p>
          <p class="text-muted small">{{ c.datetime|date:"F j, Y – g:i A" }}</p>
          
          <p class="fw-semibold fs-6">
            Available Slots: <span class="text-success">{{ c.available_slots }}</span> / {{ c.total_slots }}
          </p>

          <!-- Social Icons -->
          <div class="d-flex justify-content-center gap-3 fs-5 mb-3 text-primary">
            <i class="fab fa-facebook-f"></i>
            <i class="fab fa-twitter"></i>
            <i class="fab fa-linkedin-in"></i>
            <i class="fab fa-pinterest-p"></i>
          </div>

          <!-- Book Now Button -->
           {% if c.available_slots == 0 %}
             <button class="btn btn-secondary btn-sm px-4 rounded-pill fw-semibold shadow-sm disabled"
       type="button">
  <i class="fas fa-calendar-check me-2"></i>Booked
</button>
{% else %}

         <button class="btn btn-outline-primary btn-sm px-4 rounded-pill fw-semibold shadow-sm"
        onclick="Booking('{{c.id}}')" type="button">
  <i class="fas fa-calendar-check me-2"></i>Book Now
</button>
        {% endif %}

        </div>
      </div>
    </div>
    {% endfor %}
    
  </div>
</div>



<!-- Booking Modal -->
<div class="modal fade" id="bookModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content rounded-4 shadow-lg border-0">

      <div class="modal-header bg-dark text-white rounded-top-4">
        <h5 class="modal-title fw-bold" id="bookModalLabel">
          <i class="fas fa-dumbbell me-2"></i>Book Your Class Now
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form id="bookingForm" method="post">
        {% csrf_token %}
        <div class="modal-body p-4">
            <input type="text" id="fit_id"  name="fit_id" hidden value="">
            <input type="text" id="id"  name="id" hidden value="">

          <p class="mb-3 text-muted">Please fill in your details to reserve your spot in this class.</p>

          <div class="mb-3">
            <label for="client-name" class="form-label fw-semibold">Your Name</label>
            <input type="text" class="form-control" id="client_name" name="client_name" placeholder="Enter your full name" required>
          </div>

          <div class="mb-3">
            <label for="client-email" class="form-label fw-semibold">Email Address</label>
            <input type="email" class="form-control" id="client_email" name="client_email" placeholder="example@email.com" required>
          </div>

        </div>

        <div class="modal-footer px-4 pb-4">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary px-4 fw-bold">
            <i class="fas fa-calendar-check me-2"></i>Confirm Booking
          </button>
        </div>
      </form>

    </div>
  </div>
</div>





<script type="text/javascript" src="{%  static 'js/jquery.min.js' %}"></script>
<script type="text/javascript" src="{% static 'jquery/jquery.min.js' %}"></script>
<script type="text/javascript" src="{%  static 'js/bootstrap.min.js' %}"></script>
<script type="text/javascript" src="{%  static 'js/popper.min.js' %}"></script>
<script type="text/css" src="{% static 'css/boostrap.min.css' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script>
    function Booking(id){
    $('#bookingForm')[0].reset();
    $('#fit_id').val(id)
    $('#bookModal').modal('show')
    }
</script>


<script>
    $("#bookingForm").submit(function (event) {
        event.preventDefault();
        var frm = $("#bookingForm").serialize()
        console.log(frm)
        $.ajax({
            type: "POST",
            url: "/booknow/",
            data: frm,
            success: function (response) {
                console.log(response['status']);
                $('#bookModal').modal('hide');
                location.reload()
            }
        });
        return false;
    });
</script>

{% endblock content %}